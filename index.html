<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lentando - Progress at your pace - Free Substance Use Tracker & Harm Reduction App</title>
<meta name="description" content="Free open-source app for tracking substance use, cannabis, alcohol, smoking. Harm reduction approach with no judgment. Track usage, resist urges, earn badges for progress. Private, offline-first, no ads. Alternative to Nomo, I Am Sober, Quit Genius.">
<meta name="keywords" content="substance use tracker, harm reduction, cannabis tracker, alcohol tracker, smoking tracker, quit smoking app, sobriety app, addiction recovery, mindful tracking, habit tracker, urge tracker, free sobriety app, open source recovery app">
<meta name="author" content="Frank Force">
<link rel="canonical" href="https://lentando.3d2k.com/">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://lentando.3d2k.com/">
<meta property="og:site_name" content="Lentando">
<meta property="og:title" content="Lentando - Free Substance Use Tracker & Harm Reduction App">
<meta property="og:description" content="Track substance use with a harm reduction approach. Free, private, open-source. Earn badges for progress, resist urges, build healthy habits. No ads, no judgment.">
<meta property="og:image" content="https://lentando.3d2k.com/icon-512.png?lentando-v126">
<meta property="og:image:width" content="512">
<meta property="og:image:height" content="512">
<meta property="og:image:alt" content="Lentando app icon">
<meta property="og:locale" content="en_US">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary">
<meta name="twitter:url" content="https://lentando.3d2k.com/">
<meta name="twitter:title" content="Lentando - Free Substance Use Tracker & Harm Reduction App">
<meta name="twitter:description" content="Track substance use with a harm reduction approach. Free, private, open-source. Earn badges for progress, resist urges, build healthy habits.">
<meta name="twitter:image" content="https://lentando.3d2k.com/icon-512.png?lentando-v126">
<meta name="twitter:image:alt" content="Lentando app icon">

<!-- PWA / Mobile -->
<meta name="theme-color" content="#5c6bc0">
<meta name="application-name" content="Lentando">
<link rel="icon" type="image/png" href="favicon.png?lentando-v126">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png?lentando-v126">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Lentando">

<!-- Structured Data (JSON-LD) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Lentando",
  "applicationCategory": "HealthApplication",
  "operatingSystem": "Any (PWA)",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "description": "Free open-source app for tracking substance use with a harm reduction approach. Track cannabis, alcohol, smoking. Earn badges for progress, resist urges, build healthy habits. Private and offline-first.",
  "url": "https://lentando.3d2k.com",
  "author": {
    "@type": "Person",
    "name": "Frank Force"
  },
  "datePublished": "2026-02-10",
  "softwareVersion": "1.0",
  "screenshot": "https://lentando.3d2k.com/icon-512.png",
  "featureList": [
    "Track substance use patterns",
    "Harm reduction approach",
    "Badge and progress system",
    "Urge resistance tracking",
    "Healthy habit building",
    "Private and offline-first",
    "Optional cloud sync",
    "No ads or tracking"
  ]
}
</script>
<style>
:root {
  --bg: #f4f3ef;
  --card: #ffffff;
  --card-border: #e8e7e3;
  --text: #2c2c2c;
  --muted: #8a8a8a;
  --primary: #5c6bc0;
  --primary-light: #e8eaf6;
  --win: #4caf50;
  --win-light: #e8f5e9;
  --resist: #66bb6a;
  --habit-bg: #eceff1;
  --cbd: #00897b;
  --cbd-light: #e0f2f1;
  --danger: #e53935;
  --chip-bg: #f0f0ec;
  --chip-active: #5c6bc0;
  --chip-active-text: #fff;
  --danger-light: #ffebee;
  --warn-light: #fff8e1;
  --warn: #f57f17;
  --radius: 12px;
  --radius-sm: 8px;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --bg: #1a1a1a;
    --card: #2c2c2c;
    --card-border: #3a3a3a;
    --text: #e8e8e8;
    --muted: #a0a0a0;
    --primary: #7986cb;
    --primary-light: #2a2f4a;
    --win: #66bb6a;
    --win-light: #1e3a1f;
    --resist: #81c784;
    --habit-bg: #2e3338;
    --cbd: #26a69a;
    --cbd-light: #1a2e2c;
    --danger: #ef5350;
    --chip-bg: #3a3a3a;
    --chip-active: #7986cb;
    --chip-active-text: #fff;
    --danger-light: #3a1f1f;
    --warn-light: #3a3120;
    --warn: #ffb74d;
  }
}

/* Explicit dark theme toggle (shares same variables as prefers-color-scheme) */
[data-theme="dark"] {
  --bg: #1a1a1a;
  --card: #2c2c2c;
  --card-border: #3a3a3a;
  --text: #e8e8e8;
  --muted: #a0a0a0;
  --primary: #7986cb;
  --primary-light: #2a2f4a;
  --win: #66bb6a;
  --win-light: #1e3a1f;
  --resist: #81c784;
  --habit-bg: #2e3338;
  --cbd: #26a69a;
  --cbd-light: #1a2e2c;
  --danger: #ef5350;
  --chip-bg: #3a3a3a;
  --chip-active: #7986cb;
  --chip-active-text: #fff;
  --danger-light: #3a1f1f;
  --warn-light: #3a3120;
  --warn: #ffb74d;
}

* { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
  max-width: 480px;
  margin: 0 auto;
  padding: 0 16px 80px;
  overscroll-behavior: none;
}

/* Remove tap delay on interactive elements */
button, .chip, .tab-btn, .habit-btn, .big-btn, .tl-act-btn, .export-btn, input[type="checkbox"] {
  touch-action: manipulation;
}

/* ===== HEADER ===== */
header {
  padding: 20px 0 12px;
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}
header h1 { 
  font-size: 24px; 
  font-weight: 700;
}
header h1 .brand {
  background: linear-gradient(135deg, var(--primary), var(--cbd));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
header h1 .tagline {
  font-size: 11px;
  font-weight: 400;
  color: var(--muted);
  margin-left: 6px;
  letter-spacing: 0.5px;
}
header .date { font-size: 14px; color: var(--muted); }

/* ===== ACTION BUTTONS ===== */
.action-group { margin-bottom: 8px; }

.big-btn {
  width: 100%;
  padding: 18px;
  border: none;
  border-radius: var(--radius);
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.1s, opacity 0.15s;
  color: #fff;
}
.big-btn:active { transform: scale(0.97); opacity: 0.9; }

.btn-used { background: var(--primary); }
.btn-resisted { background: var(--resist); }

.used-row {
  display: flex;
  gap: 8px;
}
.used-row .btn-used { flex: 3; }
.btn-undo {
  flex: 1;
  background: #e6a817;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  padding: 12px 8px;
  display: none;
}
.used-row.has-undo .btn-undo { display: block; }
.btn-undo:active { background: #c98f0e; color: #fff; }

/* ===== CHIP ROWS ===== */
.chip-row {
  margin-top: 8px;
  padding: 10px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  overflow: hidden;
}
.chip-row.hidden { display: none; }

.chip-row-label {
  font-size: 11px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}
.chip-group { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 8px; }
.chip-group:last-child { margin-bottom: 0; }

.chip {
  padding: 5px 12px;
  border-radius: 16px;
  border: 1px solid var(--card-border);
  background: var(--chip-bg);
  font-size: 13px;
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
  white-space: nowrap;
}
.chip.active {
  background: var(--chip-active);
  color: var(--chip-active-text);
  border-color: var(--chip-active);
}
.chip:active { opacity: 0.8; }

.chip-dismiss {
  display: block;
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
  cursor: pointer;
  text-align: right;
  border: none;
  background: none;
}

/* ===== COACHING TIP ===== */
.coaching-tip {
  margin-top: 8px;
  padding: 10px 14px;
  background: var(--win-light);
  border-radius: var(--radius-sm);
  font-size: 14px;
  color: var(--win);
  text-align: center;
  font-weight: 500;
}
.coaching-tip.hidden { display: none; }

/* ===== WATER REMINDER ===== */
.water-reminder {
  margin-top: 8px;
}
.water-reminder.hidden { display: none; }
.water-reminder-btn {
  width: 100%;
  padding: 14px;
  border: 2px dashed var(--cbd);
  border-radius: var(--radius-sm);
  background: var(--cbd-light);
  color: var(--cbd);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}
.water-reminder-btn:active {
  background: var(--cbd);
  color: #fff;
}

/* ===== HABIT BUTTONS ===== */
.habit-row {
  display: flex;
  gap: 8px;
  margin: 16px 0;
  flex-wrap: wrap;
}
.habit-btn {
  flex: 1;
  min-width: 60px;
  padding: 10px 4px;
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  background: var(--card);
  color: var(--text);
  font-size: 11px;
  text-align: center;
  cursor: pointer;
  line-height: 1.3;
}
.habit-btn .icon { font-size: 18px; display: block; margin-bottom: 2px; }
.habit-btn:active { background: var(--habit-bg); }

.exercise-chips {
  display: flex;
  gap: 6px;
  margin-top: 6px;
  justify-content: center;
}
.exercise-chips.hidden { display: none; }

/* ===== DASHBOARD TILES ===== */
.section-label {
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 20px 0 8px;
}

.tile-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}
.tile {
  padding: 12px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
}
.tile[data-tooltip] {
  cursor: pointer;
  touch-action: manipulation;
}
.tile .val { font-size: 22px; font-weight: 700; }
.tile .label { font-size: 12px; color: var(--muted); }
.tile .sub { font-size: 11px; color: var(--muted); margin-top: 2px; }

/* ===== TIMELINE ===== */
.timeline-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 0;
  border-bottom: 1px solid var(--card-border);
}
.timeline-item:last-child { border-bottom: none; }
.tl-time { font-size: 13px; color: var(--muted); min-width: 58px; padding-top: 2px; }
.tl-icon { font-size: 18px; min-width: 24px; text-align: center; padding-top: 1px; }
.tl-body { flex: 1; }
.tl-title { font-size: 14px; font-weight: 600; }
.tl-detail { font-size: 12px; color: var(--muted); }
.tl-actions {
  display: flex;
  gap: 4px;
  padding-top: 2px;
}
.tl-act-btn {
  border: none;
  background: none;
  font-size: 14px;
  cursor: pointer;
  padding: 4px;
  opacity: 0.7;
  color: var(--text);
}
.tl-act-btn:hover { opacity: 1; }
.tl-act-btn:disabled { opacity: 0.2; cursor: default; }

.empty-state {
  text-align: center;
  padding: 24px;
  color: var(--muted);
  font-size: 14px;
  white-space: nowrap;
}

/* ===== WINS ===== */
.win-list { 
  list-style: none;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
}
.win-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 16px 12px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius);
  text-align: center;
  position: relative;
}
.win-icon {
  font-size: 32px;
  line-height: 1;
}
.win-label {
  font-size: 12px;
  font-weight: 500;
  line-height: 1.3;
  color: var(--text);
}
.win-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  border-radius: 12px;
  background: var(--win-light);
  color: var(--win);
  font-size: 12px;
  font-weight: 700;
}
.win-item.unearned {
  opacity: 0.4;
}
.win-item.unearned .win-badge {
  background: rgba(255, 59, 48, 0.15);
  color: #ff3b30;
}

/* ===== BADGE TOOLTIP (MOBILE) ===== */
.badge-tooltip {
  position: fixed;
  z-index: 10000;
  background: var(--card);
  border: 2px solid var(--primary);
  border-radius: var(--radius);
  padding: 12px 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  max-width: 280px;
  font-size: 14px;
  line-height: 1.5;
  color: var(--text);
  pointer-events: none;
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 0.2s, transform 0.2s;
}
.badge-tooltip.visible {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}

/* ===== ONBOARDING ===== */
#onboarding-overlay:not(.hidden) { display: block; background: var(--bg); }
.onboarding-sheet {
  max-width: 440px;
  margin: 0 auto;
  padding: 24px 20px;
}
.onboarding-header {
  text-align: center;
  margin-bottom: 20px;
}
.onboarding-header img {
  margin-bottom: 8px;
}
.onboarding-header h1 {
  font-size: 32px;
  margin-bottom: 4px;
}
.onboarding-header h1 .brand {
  background: linear-gradient(135deg, var(--primary), var(--cbd));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.onboarding-header .tagline {
  font-size: 12px;
  font-weight: 400;
  color: var(--muted);
  letter-spacing: 0.5px;
  margin: 0;
  text-align: center;
}
.onboarding-content h2 {
  font-size: 18px;
  margin-bottom: 20px;
  text-align: center;
}
.profile-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.profile-card {
  background: var(--card);
  border: 2px solid var(--card-border);
  border-radius: var(--radius);
  padding: 24px 16px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
}
.profile-card:hover {
  border-color: var(--primary);
  transform: translateY(-2px);
}
.profile-card:active {
  transform: translateY(0);
}
.profile-icon {
  font-size: 48px;
  margin-bottom: 12px;
}
.profile-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
}

/* Login screen inputs */
#login-form {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.login-input {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  min-width: 0;
}
.password-wrap {
  position: relative;
  display: flex;
}
.password-wrap input {
  flex: 1;
  padding-right: 40px;
}
.password-toggle {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  padding: 4px;
  color: var(--muted);
  line-height: 1;
}

/* ===== MODAL ===== */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  z-index: 100;
}
.modal-overlay.hidden { display: none; }

/* Login and onboarding overlays should have opaque background */
#login-overlay,
#onboarding-overlay {
  background: var(--bg);
  align-items: flex-start;
  overflow-y: auto;
}

.modal-sheet {
  width: 100%;
  max-width: 480px;
  background: var(--card);
  border-radius: 16px 16px 0 0;
  padding: 20px 16px 32px;
  max-height: 80vh;
  overflow-y: auto;
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.modal-header h2 { font-size: 18px; }
.modal-close {
  border: none;
  background: none;
  font-size: 24px;
  cursor: pointer;
  color: var(--muted);
}
.modal-field { margin-bottom: 14px; }
.modal-field label {
  display: block;
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}
.modal-actions {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}
.modal-actions button {
  flex: 1;
  padding: 12px;
  border-radius: var(--radius-sm);
  border: none;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
}
.btn-save { background: var(--primary); color: #fff; }
.btn-delete { background: var(--danger-light); color: var(--danger); }

/* ===== TABS ===== */
.tab-bar {
  display: flex;
  margin-bottom: 16px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  overflow: hidden;
}
.tab-btn {
  flex: 1;
  padding: 10px 4px;
  border: none;
  background: none;
  font-size: 14px;
  font-weight: 600;
  color: var(--muted);
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}
.tab-btn.active {
  background: var(--primary);
  color: #fff;
}
.tab-btn:not(.active):active { background: var(--chip-bg); }

.tab-panel { display: none; }
.tab-panel.active { display: block; }

/* ===== HISTORY ===== */
.history-list { list-style: none; }

.day-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin: 12px 0;
  padding: 8px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
}

.day-nav-btn {
  background: var(--primary);
  color: #fff;
  border: none;
  padding: 8px 16px;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  min-width: 80px;
}

.day-nav-btn:hover {
  background: var(--primary-light);
  color: var(--primary);
}

.day-nav-btn:active {
  transform: scale(0.95);
}
.day-nav-btn:disabled {
  opacity: 0.35;
  cursor: default;
  pointer-events: none;
}

.day-nav-date {
  font-weight: 600;
  font-size: 15px;
  color: var(--text);
  flex: 1;
  text-align: center;
}

/* ===== GRAPH ===== */
.graph-container {
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  padding: 16px 12px 12px;
  margin-bottom: 12px;
}
.graph-title {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 12px;
}
.graph-bars {
  display: flex;
  align-items: flex-end;
  gap: 3px;
  height: 135px;
  padding-bottom: 22px;
  position: relative;
}
.graph-bar-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  min-width: 0;
}
.graph-bar-val {
  font-size: 9px;
  color: var(--muted);
  margin-bottom: 2px;
  min-height: 12px;
}
.graph-bar {
  border-radius: 3px 3px 0 0;
  min-width: 6px;
  max-width: 36px;
  width: 100%;
  opacity: 0.85;
}
.graph-bar-label {
  font-size: 8px;
  color: var(--muted);
  margin-top: 2px;
  white-space: nowrap;
  text-align: center;
}
.graph-range {
  display: flex;
  gap: 6px;
  margin-bottom: 12px;
}

/* ===== EXPORT ===== */
.export-bar {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}
.export-btn {
  flex: 1;
  padding: 12px;
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  background: var(--card);
  color: var(--text);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  text-align: center;
}
.export-btn:active { background: var(--chip-bg); }
.danger-btn { 
  border-color: var(--danger);
  color: var(--danger);
  border-style: dashed;
}
.danger-btn:active { background: var(--danger-light); }
.import-status {
  margin-top: 8px;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 600;
  text-align: center;
}
.import-status.success { background: var(--win-light); color: var(--win); }
.import-status.error   { background: var(--danger-light); color: var(--danger); }
.import-status.warn    { background: var(--warn-light); color: var(--warn); }

/* ===== TO-DO LIST ===== */
.todo-input-row {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}
.todo-input {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  background: var(--card);
  color: var(--text);
  font-family: inherit;
  font-size: 14px;
}
.todo-input::placeholder { color: var(--muted); }
.todo-add-btn {
  padding: 10px 16px;
  border: 1px solid var(--primary);
  border-radius: var(--radius-sm);
  background: var(--primary);
  color: #fff;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
}
.todo-add-btn:active { opacity: 0.8; }
.todo-list { list-style: none; }
.todo-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-sm);
  margin-bottom: 6px;
}
.todo-item.done .todo-text {
  text-decoration: line-through;
  color: var(--muted);
}
.todo-check {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  cursor: pointer;
  accent-color: var(--primary);
}
.todo-text {
  flex: 1;
  font-size: 14px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0;
}
.todo-edit-input {
  flex: 1;
  font-size: 14px;
  background: var(--chip-bg);
  border: 1px solid var(--primary);
  border-radius: 4px;
  padding: 4px 8px;
  color: var(--text);
  outline: none;
}

/* ===== UTILITIES ===== */
.hidden { display: none !important; }
.flash { animation: flash 0.3s ease; }
@keyframes flash {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
@keyframes pulse {
  0% { transform: scale(1); filter: brightness(1); }
  30% { transform: scale(0.95); filter: brightness(1.3); }
  60% { transform: scale(1.08); filter: brightness(1.2); }
  100% { transform: scale(1); filter: brightness(1); }
}
.pulse { animation: pulse 0.4s ease-out; }
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.toast {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  padding: 12px 20px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.2s;
  pointer-events: none;
  font-size: 14px;
  font-weight: 500;
  max-width: 90%;
  text-align: center;
}
.toast.show { opacity: 1; pointer-events: auto; }

#splash-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  gap: 16px;
}
#splash-screen.hidden {
  display: none;
}
#splash-screen img {
  width: 120px;
  height: 120px;
  margin-bottom: 8px;
}
#splash-screen h1 {
  font-size: 32px;
  margin: 0;
}
#splash-screen h1 .brand {
  background: linear-gradient(135deg, var(--primary), var(--cbd));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
#splash-screen .tagline {
  font-size: 16px;
  color: var(--muted);
  font-style: italic;
}

/* ===== LANDING PAGE ===== */
#landing-page {
  position: fixed;
  inset: 0;
  background: var(--bg);
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 9999;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
#landing-page.hidden { display: none; }

.landing-content {
  width: 100%;
  max-width: 480px;
  padding: 40px 24px 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  min-height: 100dvh;
}

.landing-logo {
  width: 100px;
  height: 100px;
  margin-bottom: 8px;
}

.landing-title {
  font-size: 36px;
  font-weight: 700;
  margin-bottom: 4px;
}

.landing-title .brand {
  background: linear-gradient(135deg, var(--primary), var(--cbd));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.landing-tagline {
  font-size: 17px;
  color: var(--muted);
  font-style: italic;
  margin-bottom: 24px;
}

.landing-features {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 14px;
  margin-bottom: 24px;
}

.landing-feature {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: var(--radius);
  padding: 14px 16px;
  text-align: left;
}

.landing-feature-icon {
  font-size: 24px;
  flex-shrink: 0;
  line-height: 1;
  margin-top: 2px;
}

.landing-feature-text {
  font-size: 14px;
  color: var(--text);
  line-height: 1.5;
}

.landing-feature-text strong {
  display: block;
  margin-bottom: 2px;
}

.landing-cta {
  width: 100%;
  padding: 16px;
  font-size: 17px;
  font-weight: 600;
  border: none;
  border-radius: var(--radius);
  background: var(--primary);
  color: #fff;
  cursor: pointer;
  margin-bottom: 24px;
  transition: opacity 0.15s;
}
.landing-cta:active { opacity: 0.85; }

.landing-footer {
  font-size: 12px;
  color: var(--muted);
  text-align: center;
  line-height: 1.6;
  margin-top: auto;
}

.landing-footer a {
  color: var(--primary);
  text-decoration: none;
}
</style>
</head>
<body>

<!-- ===== SPLASH SCREEN ===== -->
<div id="splash-screen">
  <img src="icon-192.png?lentando-v126" alt="Lentando app logo - substance use and harm reduction tracker">
  <h1><span class="brand">Lentando</span></h1>
  <p class="tagline">progress at your pace</p>
</div>

<!-- ===== LANDING PAGE ===== -->
<div id="landing-page" class="hidden">
  <div class="landing-content">
    <img class="landing-logo" src="icon-192.png?lentando-v126" alt="Lentando - Free substance use tracker and harm reduction app">
    <h1 class="landing-title"><span class="brand">Lentando</span></h1>
    <p class="landing-tagline">progress at your pace</p>

    <div class="landing-features">
      <div class="landing-feature">
        <span class="landing-feature-icon">üìä</span>
        <div class="landing-feature-text">
          <strong>Track your patterns</strong>
          One tap to log use, urges, and habits.
        </div>
      </div>
      <div class="landing-feature">
        <span class="landing-feature-icon">üèÜ</span>
        <div class="landing-feature-text">
          <strong>Celebrate progress</strong>
          Badges for gaps, tapers, and streaks.
        </div>
      </div>
      <div class="landing-feature">
        <span class="landing-feature-icon">üîí</span>
        <div class="landing-feature-text">
          <strong>Private by choice</strong>
          No account required. Optional sync.
        </div>
      </div>
    </div>

    <button class="landing-cta" onclick="App.dismissLanding()">Get Started</button>

    <div class="landing-footer">
      Free to use ¬∑ No ads ¬∑ No tracking<br>
      <a href="privacy.html" target="_blank">Privacy Policy</a> ¬∑ <a href="terms.html" target="_blank">Terms of Use</a><br>
      Lentando &copy; 2026 Frank Force
    </div>
  </div>
</div>

<header>
  <h1><span class="brand">Lentando</span> <span class="tagline">progress at your pace</span></h1>
  <div class="date" id="header-date"></div>
</header>

<!-- ===== TAB BAR ===== -->
<div class="tab-bar" id="tab-bar">
  <button class="tab-btn active" data-tab="today">Today</button>
  <button class="tab-btn" data-tab="history">History</button>
  <button class="tab-btn" data-tab="graph">Trends</button>
  <button class="tab-btn" data-tab="wins">Badges</button>
  <button class="tab-btn" data-tab="settings">Settings</button>
</div>

<!-- ===== TODAY TAB ===== -->
<div class="tab-panel active" id="tab-today">

  <!-- ACTION BUTTONS -->
  <section>
    <div class="action-group">
      <div class="used-row" id="used-row">
        <button class="big-btn btn-used" id="btn-used" title="Track when you used"><span id="used-label">Use</span></button>
        <button class="big-btn btn-undo" id="btn-undo" title="Undo the last session you logged">‚Ü© Undo</button>
      </div>
      <div class="chip-row hidden" id="used-chips"></div>
    </div>

    <div class="action-group" style="margin-top:12px">
      <button class="big-btn btn-resisted" id="btn-resisted" title="Track urges you resist">Resist üí™</button>
      <div class="chip-row hidden" id="resisted-chips"></div>
      <div class="coaching-tip hidden" id="coaching-tip">
        <span id="coaching-text"></span>
      </div>
      <div class="water-reminder hidden" id="water-reminder">
        <button class="water-reminder-btn" id="water-reminder-btn" onclick="App.logWaterFromReminder()" title="Drink some water and stay hydrated">üíß Drink some water</button>
      </div>
    </div>
  </section>

  <!-- QUICK HABITS -->
  <div class="habit-row" id="habit-row">
    <button class="habit-btn" data-habit="water" title="Drink water"><span class="icon">üíß</span>Water</button>
    <button class="habit-btn" data-habit="breaths" title="Take 10 deep breaths"><span class="icon">üå¨Ô∏è</span>Breaths</button>
    <button class="habit-btn" data-habit="clean" title="Tidy your room or space"><span class="icon">üßπ</span>Tidy</button>
    <button class="habit-btn" data-habit="outside" title="Get some fresh air or look out the window"><span class="icon">üå≥</span>Outside</button>
    <button class="habit-btn" data-habit="exercise" title="Exercise - click to select duration"><span class="icon">üèÉ</span>Exercise</button>
  </div>
  <div class="exercise-chips hidden" id="exercise-chips">
    <span class="chip" data-min="5" title="5 minutes of exercise">5 min</span>
    <span class="chip" data-min="10" title="10 minutes of exercise">10 min</span>
    <span class="chip" data-min="20" title="20 minutes of exercise">20 min</span>
    <span class="chip" data-min="30" title="30 minutes of exercise">30 min</span>
  </div>

  <!-- DASHBOARD -->
  <div class="section-label">Today</div>
  <div class="tile-grid" id="metrics"></div>

  <div class="section-label">Progress (Last 7 Days)</div>
  <div class="tile-grid" id="progress"></div>

  <div class="section-label">My Goals</div>
  <div class="todo-input-row">
    <input type="text" class="todo-input" id="todo-input" placeholder="Add a goal‚Ä¶" maxlength="120">
    <button class="todo-add-btn" id="todo-add-btn">+</button>
  </div>
  <ul class="todo-list" id="todo-list"></ul>
  <button class="export-btn hidden" id="todo-clear-btn" onclick="App.clearTodos()" style="width:100%;margin-top:8px;font-size:13px;padding:10px;color:var(--muted)">üóëÔ∏è Clear Goals</button>

</div>

<!-- ===== GRAPH TAB ===== -->
<div class="tab-panel" id="tab-graph">
  <div id="hour-graphs"></div>
  <div class="graph-range" id="graph-range">
    <span class="chip active" data-days="7">7 days</span>
    <span class="chip" data-days="14">14 days</span>
    <span class="chip" data-days="30">30 days</span>
  </div>
  <div id="graph-content"></div>
</div>

<!-- ===== HISTORY TAB ===== -->
<div class="tab-panel" id="tab-history">
  <div class="day-nav" id="day-nav">
    <button class="day-nav-btn" id="prev-day">‚Üê Prev</button>
    <span class="day-nav-date" id="current-day-label">Today</span>
    <button class="day-nav-btn" id="next-day">Next ‚Üí</button>
  </div>
  <ul class="history-list" id="history-events"></ul>
</div>

<!-- ===== WINS TAB ===== -->
<div class="tab-panel" id="tab-wins">
  <div class="section-label">Today's Badges</div>
  <ul class="win-list" id="wins-today"></ul>
  
  <div class="section-label">Lifetime Badges</div>
  <ul class="win-list" id="wins-total"></ul>
</div>

<!-- ===== SETTINGS TAB ===== -->
<div class="tab-panel" id="tab-settings">
  <div class="section-label">Account</div>
  <div id="auth-status" style="background:var(--card);border:1px solid var(--card-border);border-radius:var(--radius-sm);padding:12px;margin-bottom:4px">
    Loading...
  </div>

  <div class="section-label" style="margin-top:20px">Customization</div>
  <div class="export-bar">
    <button class="export-btn" id="btn-theme-toggle-settings" onclick="App.toggleTheme()">
      <span id="theme-icon-settings">üåô</span> <span id="theme-text-settings">Enable Dark Theme</span>
    </button>
  </div>
  <div class="export-bar">
    <button class="export-btn" id="btn-sound-toggle" onclick="App.toggleSound()">
      <span id="sound-icon-settings">üîä</span> <span id="sound-text-settings">Disable Sounds</span>
    </button>
  </div>
  <div class="export-bar">
    <button class="export-btn" id="btn-change-addiction" onclick="App.changeAddiction()">üîÑ Change Addiction</button>
  </div>

  <div class="section-label" style="margin-top: 24px;">Data Management</div>
  <div style="background:var(--card);border:1px solid var(--card-border);border-radius:var(--radius-sm);padding:12px;margin-bottom:8px;font-size:12px;color:var(--muted);line-height:1.5">
    üîí Your data stays on your device unless you sign in to sync. No ads, no data selling. Export or delete anytime.
    <a href="./privacy.html?lentando-v126" target="_blank" rel="noopener noreferrer" style="color:var(--primary)">Privacy Policy</a> ¬∑ 
    <a href="./terms.html?lentando-v126" target="_blank" rel="noopener noreferrer" style="color:var(--primary)">Terms of Service</a>
  </div>
  <div class="export-bar">
    <button class="export-btn" id="btn-export-json" onclick="App.exportJSON()">üì• Export JSON</button>
  </div>
  <div class="export-bar">
    <button class="export-btn" id="btn-import-json" onclick="document.getElementById('import-file').click()">üì§ Import JSON</button>
    <input type="file" id="import-file" accept=".json" style="display:none" onchange="App.importJSON(this)">
  </div>
  <div class="import-status hidden" id="import-status"></div>
  <div class="export-bar">
    <button class="export-btn danger-btn" id="btn-clear-db" onclick="App.clearDatabase()">üóëÔ∏è Clear Database</button>
  </div>
  <div class="export-bar hidden" id="delete-account-bar">
    <button class="export-btn danger-btn" onclick="App.deleteAccount()">‚ùå Delete Account</button>
  </div>

  <div class="section-label" style="margin-top: 24px;">About</div>
  <div style="background: var(--card); border: 1px solid var(--card-border); border-radius: var(--radius-sm); padding: 16px; font-size: 14px; line-height: 1.6;">
    <p style="margin-bottom: 12px;"><strong>Lentando</strong> is a mindful habit and usage tracker designed to help you build awareness and make intentional choices.</p>
    <p style="margin-bottom: 12px; color: var(--muted);">Track your substance use, resist urges, celebrate wins, and cultivate positive habits. All in a simple, zero-friction interface.</p>
    <p style="margin-bottom: 12px;">
      <a href="https://github.com/KilledByAPixel/Lentando" target="_blank" rel="noopener noreferrer" style="color: var(--primary); text-decoration: none; font-weight: 600;">
        View on GitHub ‚Üí
      </a>
    </p>
    <p style="margin-bottom: 12px; font-size: 12px; color: var(--muted); line-height: 1.5;">‚ö†Ô∏è Lentando is a self-help tool, not a replacement for professional care. For support, call the SAMHSA 24/7 National Helpline: <a href="tel:1-800-662-4357" style="color:var(--primary);text-decoration:none;font-weight:600">1-800-662-HELP</a></p>
    <p style="margin-bottom: 0; color: var(--muted); font-size: 12px;">Lentando ¬© 2026 Frank Force</p>
  </div>
</div>

<!-- ===== LOGIN SCREEN ===== -->
<div class="modal-overlay hidden" id="login-overlay">
  <div class="onboarding-sheet">
    <div class="onboarding-header">
      <img src="icon-192.png?lentando-v126" alt="Lentando app icon" style="width:80px;height:80px;margin:0 auto;display:block">
      <h1><span class="brand">Lentando</span></h1>
      <p class="tagline">progress at your pace</p>
    </div>
    <div class="onboarding-content">
      <h2 style="margin-bottom:12px">Sign in to sync your data</h2>
      <p style="font-size:14px;color:var(--muted);margin-bottom:16px;line-height:1.5">Create an account or sign in to sync your progress across all your devices.</p>
      
      <div style="display:flex;flex-direction:column;gap:10px;margin-bottom:12px">
        <button class="export-btn" style="padding:14px;font-size:15px" onclick="App.loginWithGoogle()">üîë Sign in with Google</button>
        <div class="login-inputs"></div>
        <div style="display:flex;gap:8px">
          <button class="export-btn" style="flex:1;padding:12px;font-size:14px" onclick="App.loginWithEmailFromScreen()">üîì Log In</button>
          <button class="export-btn" style="flex:1;padding:12px;font-size:14px" onclick="App.signupWithEmailFromScreen()">‚ú® Sign Up</button>
        </div>
        <button style="background:none;border:none;color:var(--muted);font-size:12px;cursor:pointer;padding:4px 0;text-decoration:underline" onclick="App.forgotPasswordFromScreen()">Forgot password?</button>
      </div>

      <div style="margin-top:12px">
        <button class="export-btn" style="width:100%;padding:10px;font-size:13px;opacity:0.7" onclick="App.skipLogin()">Continue without account</button>
        <p style="font-size:11px;color:var(--muted);margin-top:6px;text-align:center;line-height:1.4">Your data will only be saved on this device and won't sync to other devices.</p>
      </div>
    </div>
  </div>
</div>

<!-- ===== ONBOARDING MODAL ===== -->
<div class="modal-overlay hidden" id="onboarding-overlay">
  <div class="onboarding-sheet">
    <div class="onboarding-header">
      <img src="icon-192.png?lentando-v126" alt="Lentando app icon" style="width:80px;height:80px;margin:0 auto;display:block">
      <h1><span class="brand">Lentando</span></h1>
      <p class="tagline">progress at your pace</p>
    </div>
    <div class="onboarding-content">
      <h2>Select what you're tracking</h2>
      <div class="profile-grid">
        <button class="profile-card" data-profile="cannabis">
          <div class="profile-icon">üåø</div>
          <div class="profile-name">Cannabis</div>
        </button>
        <button class="profile-card" data-profile="alcohol">
          <div class="profile-icon">üç∫</div>
          <div class="profile-name">Alcohol</div>
        </button>
        <button class="profile-card" data-profile="smoking">
          <div class="profile-icon">üö¨</div>
          <div class="profile-name">Smoking</div>
        </button>
        <button class="profile-card" data-profile="other">
          <div class="profile-icon">‚ö°</div>
          <div class="profile-name">Other</div>
        </button>
      </div>
      <p style="margin-top:20px;font-size:12px;color:var(--muted);text-align:center;line-height:1.5">‚ö†Ô∏è Reducing or stopping heavy daily use can be dangerous. If you are a heavy user, please talk to a clinician before making changes.</p>
    </div>
  </div>
</div>

<!-- ===== EDIT MODAL ===== -->
<div class="modal-overlay hidden" id="modal-overlay">
  <div class="modal-sheet" id="modal-sheet"></div>
</div>

<script type="module" src="zzfx.js?lentando-v126"></script>
<script src="code.js?lentando-v126"></script>
<script type="module" src="firebase-sync.js?lentando-v126"></script>
</body>
</html>
